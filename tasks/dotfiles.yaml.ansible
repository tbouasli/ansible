- name: Clone dotfiles
  tags: [dotfiles]
  git:
    repo: https://github.com/tbouasli/dotfiles
    dest: ~/.dotfiles
    update: yes
    force: yes

- name: Install stow
  tags: [dotfiles]
  changed_when: false
  apt:
    name: stow
    state: present

- name: Stow dotfiles
  tags: [dotfiles]
  command: "stow -t ~ -d {{ lookup('env', 'HOME') }}/.dotfiles -S $(ls {{ lookup('env', 'HOME') }}/.dotfiles)" 